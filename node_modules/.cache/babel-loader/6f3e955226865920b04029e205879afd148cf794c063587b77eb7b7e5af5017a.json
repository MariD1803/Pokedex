{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport _imports_0 from './assets/logo.png';\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_HelloWorld = _resolveComponent(\"HelloWorld\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_cache[0] || (_cache[0] = _createElementVNode(\"img\", {\n    alt: \"Vue logo\",\n    src: _imports_0\n  }, null, -1 /* HOISTED */)), _createVNode(_component_HelloWorld, {\n    msg: \"Welcome to Your Vue.js App\"\n  }), _createTextVNode(\" \" + _toDisplayString($data.welcome), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_imports_0","_createElementBlock","_Fragment","_createElementVNode","alt","src","_createVNode","_component_HelloWorld","msg","_createTextVNode","_toDisplayString","$data","welcome"],"sources":["/home/mariangel/Documents/project/prueba/src/App.vue"],"sourcesContent":["<template>\n  <img alt=\"Vue logo\" src=\"./assets/logo.png\">\n  <HelloWorld msg=\"Welcome to Your Vue.js App\"/>\n  {{welcome}}\n</template>\n\n<script>\nimport HelloWorld from './components/HelloWorld.vue'\nconst url = \"https://pokeapi.co/api/v2/pokemon/\"\nimport spinnerLoader from './components/spinner.js';\nimport buttonCustom from './components/button.js';\nimport cardCustom from './components/card.js';\nimport notResultCustom from './components/notresult.js';\n\nexport default {\n  name: 'App',\n  components: {\n    HelloWorld,\n    spinnerLoader,\n    buttonCustom,\n    cardCustom,\n    notResultCustom\n  },\n  data() {\n    return {\n      welcome: {\n        title: 'Welcome to Pokédex',\n        info: 'The digital encyclopedia created by Professor Oak is an invaluable tool to Trainers in the Pokémon world.'\n      },\n      error: {\n        title: 'Uh-oh!',\n        msg: 'You look lost on your journey!'\n      },\n      havent: {\n        title: 'Oh-no!',\n        msg: \"You doesn't have any favorite pokemon!\"\n      },\n      display: false,\n      displaySpinner: false,\n      searchInput: '',\n      results: [],\n      favorites: [],\n      displaySearch: true,\n      displayFavorites: false,\n      modal: false,\n      pokemon: []\n    }\n  },\n  methods:{\n    setDisplay(result) {\n      this.displaySpinner = true;\n      setTimeout(() => {\n        this.displaySpinner = false;\n        this.display = result;\n        this.clearSearch();\n      }, 1900);\n    },\n    async displayModal(pokemon,idx){\n      const response = await fetch(pokemon.url);\n      this.pokemon = await response.json();\n      this.pokemon.idx = idx;\n      this.pokemon.favorite = pokemon.favorite != '' ? pokemon.favorite : '';\n      this.modal = true;\n    },\n    markFavorites(){\n      for (let i = 0; i < this.results.length; i++) {\n        for (let j = 0; j < this.store.favorites.length; j++) {\n          if(this.results[i].name === this.store.favorites[j].name){\n            this.results[i].favorite = 'true';\n          }\n        }\n      }\n    },\n    async getPokemons() {\n      try {\n        const response = await fetch(url);\n        let result = await response.json();\n        this.results = this.sortAlphabetically(result.results);\n        this.markFavorites();\n      } catch (error) {\n        this.results = [];\n      }\n    },\n    async search() {\n      await this.getPokemons()\n      this.store.favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n      let filteredResults = [];\n      this.markFavorites();\n\n      if(this.displaySearch){\n        if (this.results.length) {\n          filteredResults = this.results.filter(item => {\n            const itemName = item.name.toLowerCase().trim();\n            const input = this.searchInput.toLowerCase().trim();\n            return itemName.includes(input);\n          });\n          if(!filteredResults.length){\n            filteredResults = []\n            this.store.favorites = false\n          }\n        } else {\n          this.results = [];\n        }\n        this.results = filteredResults;\n      }else {\n        if (Array.isArray(this.store.favorites)) {\n          filteredResults = this.store.favorites.filter(item => {\n            const itemName = item.name.toLowerCase().trim();\n            const input = this.searchInput.toLowerCase().trim();\n            return itemName.includes(input);\n          });\n          if(!filteredResults.length){\n            if(this.searchInput.toLowerCase().trim() == ''){\n              await this.getPokemons()\n              filteredResults = []\n              return this.store.favorites = filteredResults  \n            }\n            this.results = []\n            filteredResults = false\n          }\n          this.store.favorites = filteredResults    \n        }else{\n          this.store.favorites = false\n        }\n      }       \n    },\n    sortAlphabetically(array){\n      return array.sort((a, b) => {\n        if (a.name.toLowerCase() < b.name.toLowerCase()) return -1;\n        if (a.name.toLowerCase() > b.name.toLowerCase()) return 1;\n        return 0;\n      });\n      \n    },\n    addOrDeleteFavorites(idx){\n      if(this.results[idx].favorite === 'true'){\n        this.store.favorites = this.store.favorites.filter(item => {\n          return item.name !== this.results[idx].name;\n        });\n        return this.results[idx].favorite = 'false';\n      }\n      this.results[idx].favorite = 'true';\n      this.results[idx].idx = idx;\n      this.store.favorites.push(this.results[idx]);\n      this.store.updateLocalStorage();\n      return this.sortAlphabetically(this.store.favorites);\n    },\n    deleteFavorites(pokemon){\n      if (this.results[pokemon.idx].favorite === 'true') {\n        this.store.favorites = this.store.favorites.filter(item => {\n          return item.name !== this.results[pokemon.idx].name;\n        });\n        this.store.updateLocalStorage();\n        return this.results[pokemon.idx].favorite = 'false';\n      }\n    },\n    async clearSearch(){\n      await this.getPokemons()\n      this.store.favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n      this.searchInput = ''\n    }\n  },\n  mounted() {\n    this.getPokemons();\n  },\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n"],"mappings":";OACsBA,UAAuB;;;uBAD7CC,mBAAA,CAAAC,SAAA,S,0BACEC,mBAAA,CAA4C;IAAvCC,GAAG,EAAC,UAAU;IAACC,GAAuB,EAAvBL;+BACpBM,YAAA,CAA8CC,qBAAA;IAAlCC,GAAG,EAAC;EAA4B,IAF9CC,gBAAA,CAEgD,GAC9C,GAAAC,gBAAA,CAAEC,KAAA,CAAAC,OAAO,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}